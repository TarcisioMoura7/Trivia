(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{100:function(e,t,a){},103:function(e,t){},104:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),s=(a(95),a(30)),o=a(28),l=(a(100),a(11)),u=a(65),m=a(46),d=a.n(m),b=a(12),h=a(13),p=a(16),g=a(14),f=a(7),v=a(15),E=a(66),y=a.n(E),O=a(140),k=a(143),j=a(72),N=a.n(j),S=a(73),w=a.n(S),C=a(67),x=a.n(C),I=(a(104),function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).state={disableBtn:!0,nameInput:"",email:"",redirect:!1,toConfig:!1,minLengthName:3},e.validateEmail=e.validateEmail.bind(Object(f.a)(e)),e.handleChange=e.handleChange.bind(Object(f.a)(e)),e.fetchGravatar=e.fetchGravatar.bind(Object(f.a)(e)),e.requestAPI=e.requestAPI.bind(Object(f.a)(e)),e.redirectToConfig=e.redirectToConfig.bind(Object(f.a)(e)),e.setInput=e.setInput.bind(Object(f.a)(e)),e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"setInput",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{id:"name-helperText",label:"Nome",variant:"outlined",name:"nameInput",onChange:function(t){var a=t.target;return e.handleChange(a)},inputProps:{"data-testid":"input-player-name"}}),r.a.createElement(O.a,{id:"email-helperText",label:"Email",type:"email",helperText:"Digite seu email do gravatar",variant:"outlined",name:"email",onChange:function(t){var a=t.target;return e.handleChange(a)},inputProps:{"data-testid":"input-gravatar-email"}}))}},{key:"requestAPI",value:function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://opentdb.com/api_token.php?command=request",t.next=3,d.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return e=t.sent,t.next=6,d.a.awrap(e.json());case 6:e=t.sent,localStorage.setItem("token",JSON.stringify(e.token)),this.setState({redirect:!0});case 9:case"end":return t.stop()}}),null,this)}},{key:"redirectToConfig",value:function(){this.setState({toConfig:!0})}},{key:"validateEmail",value:function(e){this.setState({disableBtn:!/^[a-z0-9_.-]+@[a-z]+\.[a-z]{2,3}(?:\.[a-z]{2})?$/.test(e)})}},{key:"handleChange",value:function(e){var t=e.value,a=e.name;this.setState(Object(u.a)({},a,t)),"email"===e.name&&this.validateEmail(e.value)}},{key:"fetchGravatar",value:function(){var e,t,a,n,r,c;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.state,t=e.email,a=e.nameInput,n=this.props.setPlayerInfo,r=y()(t).toString(),i.next=5,d.a.awrap(fetch("https://www.gravatar.com/avatar/".concat(r)));case 5:c=i.sent,n(c.url,a),this.requestAPI();case 8:case"end":return i.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.disableBtn,n=t.nameInput,c=t.redirect,i=t.toConfig,s=t.minLengthName;return c?r.a.createElement(l.a,{to:"/jogo"}):i?r.a.createElement(l.a,{to:"/configs"}):r.a.createElement("section",{className:"login-content"},r.a.createElement("img",{src:x.a,className:"App-logo",alt:"logo"}),this.setInput(),r.a.createElement(k.a,{type:"button","data-testid":"btn-play",disabled:a||n.length<s,onClick:function(){return e.fetchGravatar()},variant:"contained",color:"primary"},r.a.createElement(N.a,null),"Jogar"),r.a.createElement(k.a,{type:"button","data-testid":"btn-settings",onClick:function(){return e.redirectToConfig()},variant:"contained",color:"secondary"},r.a.createElement(w.a,null),"Configura\xe7\xf5es"))}}]),t}(n.Component)),q=Object(o.b)(null,(function(e){return{setPlayerInfo:function(t,a){return e(function(e,t){return{type:"GET_IMG",url:e,name:t}}(t,a))}}}))(I),T=a(57),J=a(142),L=function(e){function t(){return Object(b.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.getUrl,a=e.getName,n=e.score;return r.a.createElement("header",null,r.a.createElement("img",{style:{width:"90px",borderRadius:"50px"},"data-testid":"header-profile-picture",src:t,alt:"Profile"}),r.a.createElement("div",{className:"headerGame"},r.a.createElement("h4",{"data-testid":"header-player-name"},a),r.a.createElement("h5",{"data-testid":"header-score"},n)))}}]),t}(r.a.Component);L.defaultProps={getName:""};var R=Object(o.b)((function(e){return{getUrl:e.gravatar.url,getName:e.gravatar.name}}),null)(L),A=function(e){function t(){return Object(b.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-content"},r.a.createElement("h3",null,"Loading..."))}}]),t}(r.a.Component),P=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).incorrect=e.incorrect.bind(Object(f.a)(e)),e.correct=e.correct.bind(Object(f.a)(e)),e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"incorrect",value:function(){var e=this.props,t=e.questions,a=e.questionNumber,n=e.getScore;return t[a].incorrect_answers.map((function(e,t){return r.a.createElement("button",{type:"button",key:t,id:"incorrect",name:"incorrect","data-testid":"wrong-answer-".concat(t),onClick:function(e){var t=e.target;return n(t)},className:"w-answer"},e)}))}},{key:"correct",value:function(){var e=this.props,t=e.questions,a=e.questionNumber,n=e.getScore;return r.a.createElement("button",{type:"button",id:t[a].difficulty,name:"correct","data-testid":"correct-answer",onClick:function(e){var t=e.target;return n(t)},className:"c-answer"},t[a].correct_answer)}},{key:"render",value:function(){return r.a.createElement("div",{className:"questions-content"},this.incorrect(),this.correct())}}]),t}(n.Component),B=(a(107),a(139)),D=a(74),G=a.n(D),M=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).gif=a.gif.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"gif",value:function(){if(0===this.props.seconds)return r.a.createElement("div",null,r.a.createElement(G.a,null))}},{key:"render",value:function(){var e=this.props,t=e.questions,a=e.questionNumber,n=e.seconds;return r.a.createElement(B.a,null,r.a.createElement("div",{className:"secondsEndCategory"},r.a.createElement("span",{className:"seconds"},n),r.a.createElement("h1",{"data-testid":"question-category"},t[a].category),r.a.createElement("span",{className:"gif"},this.gif())),r.a.createElement("p",{"data-testid":"question-text",className:"asking"},t[a].question))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={questionNumber:0,questions:[],loading:!0,score:0,assertions:0,next:!1,seconds:30},a.getQuestions=a.getQuestions.bind(Object(f.a)(a)),a.getScore=a.getScore.bind(Object(f.a)(a)),a.timer=a.timer.bind(Object(f.a)(a)),a.buttonColorDisabler=a.buttonColorDisabler.bind(Object(f.a)(a)),a.nextQuestion=a.nextQuestion.bind(Object(f.a)(a)),a.enableButton=a.enableButton.bind(Object(f.a)(a)),a.setToLocal=a.setToLocal.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getQuestions(),this.count=setInterval(this.timer,1e3)}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.assertions,a=e.score,n=this.props,r=n.getUrl,c={player:{name:n.getName,assertions:t,score:a,gravatarEmail:r}},i=JSON.stringify(c);localStorage.setItem("state",i)}},{key:"setToLocal",value:function(){var e=JSON.parse(localStorage.getItem("state")),t={name:e.player.name,score:e.player.score,picture:e.player.gravatarEmail};if(localStorage.getItem("ranking")){var a=JSON.parse(localStorage.getItem("ranking"));localStorage.setItem("ranking",JSON.stringify([].concat(Object(T.a)(a),[t])))}else localStorage.setItem("ranking",JSON.stringify([t]));return r.a.createElement(l.a,{to:"/feedback"})}},{key:"getQuestions",value:function(){var e=this,t=JSON.parse(localStorage.getItem("token"));fetch("https://opentdb.com/api.php?amount=5&token=".concat(t)).then((function(e){return e.json()})).then((function(t){return e.setState({questions:Object(T.a)(t.results),loading:!1})}))}},{key:"getScore",value:function(e){var t=e.id,a=e.name,n=this.state,r=n.assertions,c=n.score,i=n.seconds,s=3,o=2,l=1;switch(a){case"correct":switch(t){case"hard":this.setState({score:10+(i-1)*s+c,assertions:r+1});break;case"medium":this.setState({score:10+(i-1)*o+c,assertions:r+1});break;case"easy":this.setState({score:10+(i-1)*l+c,assertions:r+1})}}this.buttonColorDisabler(),this.timer(a)}},{key:"timer",value:function(e){var t=this.state.seconds;switch(0===t&&(this.buttonColorDisabler(),clearInterval(this.count)),t>0&&this.setState({seconds:t-1}),0===t&&(this.buttonColorDisabler(),clearInterval(this.count)),e){case"correct":case"incorrect":clearTimeout(this.count)}}},{key:"buttonColorDisabler",value:function(){var e=document.getElementsByClassName("c-answer");e[0].style.border="3px solid rgb(6, 240, 15)",e[0].setAttribute("disabled","disabled"),document.querySelectorAll(".w-answer").forEach((function(e){e.style.border="3px solid rgb(255, 0, 0)",e.setAttribute("disabled","disabled")})),this.setState({next:!0})}},{key:"enableButton",value:function(){var e=document.getElementsByClassName("c-answer");e[0].style.border="1px solid black",e[0].removeAttribute("disabled","disabled"),document.querySelectorAll(".w-answer").forEach((function(e){e.style.border="1px solid black",e.removeAttribute("disabled","disabled")}))}},{key:"nextQuestion",value:function(){var e=this.state.questionNumber;this.setState({questionNumber:e+1,seconds:30,next:!1}),this.count=setInterval(this.timer,1e3),this.enableButton()}},{key:"render",value:function(){var e=this.state,t=e.questions,a=e.questionNumber,n=e.loading,c=e.score,i=e.seconds,s=e.next,o=this.props,l=o.getUrl,u=o.getName;return a>4?r.a.createElement(r.a.Fragment,null,this.setToLocal()):n?r.a.createElement(A,null):r.a.createElement("main",{className:"geral"},r.a.createElement(R,{getUrl:l,getName:u,score:c}),r.a.createElement("div",{className:"cardEndQuestions"},r.a.createElement(M,{questions:t,questionNumber:a,seconds:i}),r.a.createElement(P,{questions:t,questionNumber:a,getScore:this.getScore}),s?r.a.createElement(J.a,{bgcolor:"#00BFFF",clone:!0},r.a.createElement(k.a,{size:"medium",variant:"contained",type:"button","data-testid":"btn-next",onClick:this.nextQuestion},"Pr\xf3xima")):null))}}]),t}(r.a.Component),_=Object(o.b)((function(e){return{getUrl:e.gravatar.url,getName:e.gravatar.name}}),null)(Q),U=function(e){function t(){return Object(b.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es")}}]),t}(n.Component),F=a(76),z=a.n(F),W=a(75),V=a.n(W),$=function(e){function t(){return Object(b.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;return r.a.createElement("div",null,r.a.createElement("p",null,"Voc\xea acertou ",r.a.createElement("span",{"data-testid":"feedback-total-question"},e.assertions)," perguntas"),r.a.createElement("p",null,"Sua pontua\xe7\xe3o foi de ",r.a.createElement("span",{"data-testid":"feedback-total-score"},e.score)))}}]),t}(r.a.Component),K=(a(108),function(e){function t(){var e;Object(b.a)(this,t),e=Object(p.a)(this,Object(g.a)(t).call(this));var a=localStorage.getItem("state"),n=JSON.parse(a).player.score,r=JSON.parse(a).player.assertions;return e.state={score:n,assertions:r,message:"",redirectLogin:!1,redirectRanking:!1},e.setMessage=e.setMessage.bind(Object(f.a)(e)),e.redirectLogin=e.redirectLogin.bind(Object(f.a)(e)),e.redirectRanking=e.redirectRanking.bind(Object(f.a)(e)),e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setMessage()}},{key:"setMessage",value:function(){this.state.assertions<3?this.setState({message:"Podia ser melhor..."}):this.setState({message:"Mandou bem!"})}},{key:"redirectLogin",value:function(){this.setState({redirectLogin:!0})}},{key:"redirectRanking",value:function(){this.setState({redirectRanking:!0})}},{key:"render",value:function(){var e=this.state,t=e.score,a=e.message,n=e.redirectLogin;return e.redirectRanking?r.a.createElement(l.a,{to:"/ranking"}):n?r.a.createElement(l.a,{to:"/"}):r.a.createElement("section",{className:"feedback-content"},r.a.createElement($,null),r.a.createElement(R,{score:t}),r.a.createElement("p",{"data-testid":"feedback-text"},a||"Loading"),r.a.createElement("div",{className:"button-play-again"},r.a.createElement(k.a,{type:"button","data-testid":"btn-play-again",onClick:this.redirectLogin,variant:"contained",color:"primary"},r.a.createElement(V.a,null),"Jogar Novamente")),r.a.createElement("div",{className:"button-ranking"},r.a.createElement(k.a,{type:"button","data-testid":"btn-ranking",onClick:this.redirectRanking,variant:"contained",color:"secondary"},r.a.createElement(z.a,null),"Ver Ranking")))}}]),t}(r.a.Component)),H=a(77),X=a.n(H),Y=(a(109),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={redirect:!1},a.shouldRedirect=a.shouldRedirect.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"shouldRedirect",value:function(){this.setState({redirect:!0})}},{key:"render",value:function(){var e=this,t=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score}));return this.state.redirect?r.a.createElement(l.a,{to:"/"}):r.a.createElement("section",{className:"section-ranking"},r.a.createElement("h2",{className:"title","data-testid":"ranking-title"},"Ranking"),r.a.createElement("ul",{className:"ranking-list"},r.a.createElement("li",{className:"li-header"},r.a.createElement("p",null,"Foto de Perfil"),r.a.createElement("p",null,"Nome"),r.a.createElement("p",null,"Score")),t.map((function(e,t){return r.a.createElement("li",{key:e.picture,className:"li-ranking"},r.a.createElement("img",{src:e.picture,alt:"player pic",id:"user-pic"})," ",r.a.createElement("p",{id:"","data-testid":"player-name-".concat(t)},e.name)," ",r.a.createElement("p",{className:"score","data-testid":"player-score-".concat(t)},e.score))}))),r.a.createElement(k.a,{type:"button",className:"go-back-btn","data-testid":"btn-go-home",variant:"contained",color:"secondary",onClick:function(){return e.shouldRedirect()}},r.a.createElement(X.a,null),"In\xedcio"))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(42),ee=a(78),te=a(79),ae={url:"https://www.seekpng.com/png/full/245-2454602_tanni-chand-default-user-image-png.png"},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_IMG":return{url:t.url,name:t.name};default:return e}},re={result:""},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN":return{result:t.token};default:return e}},ie=Object(Z.combineReducers)({gravatar:ne,token:ce}),se=Object(Z.createStore)(ie,Object(te.composeWithDevTools)(Object(Z.applyMiddleware)(ee.a)));window.Cypress&&(window.store=se);var oe=se;i.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:oe},r.a.createElement((function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:q}),r.a.createElement(l.b,{exact:!0,path:"/configs",component:U}),r.a.createElement(l.b,{exact:!0,path:"/jogo",component:_}),r.a.createElement(l.b,{exact:!0,path:"/feedback",component:K}),r.a.createElement(l.b,{exact:!0,path:"/ranking",component:Y}))))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},67:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},90:function(e,t,a){e.exports=a(110)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.67b567ec.chunk.js.map